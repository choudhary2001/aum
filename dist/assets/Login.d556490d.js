import{r as s,S as j,Z as O,k as e,J as o,P as b,a8 as G,B as c,a9 as z,aa as C}from"./index.dff4e684.js";import{u as A,a as D,H as I,I as h,M as R,g as M,A as V,X as B}from"./App.37a2596a.js";import{u as H,C as N}from"./index.esm.650ebc72.js";import"./index.aaf1b374.js";import{R as J,C as u}from"./Col.96fcbc17.js";import{C as U}from"./CardText.dd9505fe.js";import{C as Z}from"./CardTitle.aebc4d98.js";import{F as W}from"./Form.f1a34b24.js";import{F as v}from"./FormFeedback.262b0142.js";import{L as f}from"./Label.138433f0.js";import{A as X}from"./Alert.36ececc1.js";import{U as Y}from"./UncontrolledTooltip.57b433b3.js";import{i as _,a as q}from"./login-v2-dark.eff17e22.js";/* empty css                            */import{F as K,T as Q}from"./twitter.1e1ef9e2.js";import{G as $}from"./github.03ebc23e.js";import{C as ee}from"./coffee.7b41d2b5.js";import"./InputGroupText.9c960290.js";import"./eye.4a9e31d4.js";import"./eye-off.1d07efd8.js";import"./Fade.f1e5f77c.js";import"./TooltipPopoverWrapper.2dcdb0e6.js";const oe=({t:m,name:d,role:l})=>o("div",{className:"d-flex",children:[e("div",{className:"me-1",children:e(V,{size:"sm",color:"success",icon:e(ee,{size:12})})}),o("div",{className:"d-flex flex-column",children:[o("div",{className:"d-flex justify-content-between",children:[e("h6",{children:d}),e(B,{size:12,className:"cursor-pointer",onClick:()=>C.dismiss(m.id)})]}),o("span",{children:["You have successfully logged in as an ",l," user to Vuexy. Now you can start to explore. Enjoy!"]})]})]}),te={loginEmail:"admin@demo.com"},we=()=>{const[m,d]=s.exports.useState(!0),[l,k]=s.exports.useState(!1),[ae,F]=s.exports.useState(!1);s.exports.useState(!1);const[g,n]=s.exports.useState(!1),{skin:L}=A(),E=D(),S=j();s.exports.useContext(O);const{control:y,setError:p,handleSubmit:w,formState:{errors:i}}=H({defaultValues:te});return e("div",{className:"auth-wrapper auth-cover",children:o(J,{className:"auth-inner m-0",children:[o(b,{className:"brand-logo",to:"/",onClick:r=>r.preventDefault(),children:[o("svg",{viewBox:"0 0 139 95",version:"1.1",height:"28",children:[o("defs",{children:[o("linearGradient",{x1:"100%",y1:"10.5120544%",x2:"50%",y2:"89.4879456%",id:"linearGradient-1",children:[e("stop",{stopColor:"#000000",offset:"0%"}),e("stop",{stopColor:"#FFFFFF",offset:"100%"})]}),o("linearGradient",{x1:"64.0437835%",y1:"46.3276743%",x2:"37.373316%",y2:"100%",id:"linearGradient-2",children:[e("stop",{stopColor:"#EEEEEE",stopOpacity:"0",offset:"0%"}),e("stop",{stopColor:"#FFFFFF",offset:"100%"})]})]}),e("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:e("g",{id:"Artboard",transform:"translate(-400.000000, -178.000000)",children:o("g",{id:"Group",transform:"translate(400.000000, 178.000000)",children:[e("path",{d:"M-5.68434189e-14,2.84217094e-14 L39.1816085,2.84217094e-14 L69.3453773,32.2519224 L101.428699,2.84217094e-14 L138.784583,2.84217094e-14 L138.784199,29.8015838 C137.958931,37.3510206 135.784352,42.5567762 132.260463,45.4188507 C128.736573,48.2809251 112.33867,64.5239941 83.0667527,94.1480575 L56.2750821,94.1480575 L6.71554594,44.4188507 C2.46876683,39.9813776 0.345377275,35.1089553 0.345377275,29.8015838 C0.345377275,24.4942122 0.230251516,14.560351 -5.68434189e-14,2.84217094e-14 Z",id:"Path",className:"text-primary",style:{fill:"currentColor"}}),e("path",{d:"M69.3453773,32.2519224 L101.428699,1.42108547e-14 L138.784583,1.42108547e-14 L138.784199,29.8015838 C137.958931,37.3510206 135.784352,42.5567762 132.260463,45.4188507 C128.736573,48.2809251 112.33867,64.5239941 83.0667527,94.1480575 L56.2750821,94.1480575 L32.8435758,70.5039241 L69.3453773,32.2519224 Z",id:"Path",fill:"url(#linearGradient-1)",opacity:"0.2"}),e("polygon",{id:"Path-2",fill:"#000000",opacity:"0.049999997",points:"69.3922914 32.4202615 32.8435758 70.5039241 54.0490008 16.1851325"}),e("polygon",{id:"Path-2",fill:"#000000",opacity:"0.099999994",points:"69.3922914 32.4202615 32.8435758 70.5039241 58.3683556 20.7402338"}),e("polygon",{id:"Path-3",fill:"url(#linearGradient-2)",opacity:"0.099999994",points:"101.428699 0 83.0667527 94.1480575 130.378721 47.0740288"})]})})})]}),e("h2",{className:"brand-text text-primary ms-1",children:"Vuexy"})]}),e(u,{className:"d-none d-lg-flex align-items-center p-5",lg:"8",sm:"12",children:e("div",{className:"w-100 d-lg-flex align-items-center justify-content-center px-5",children:e("img",{className:"img-fluid",src:L==="dark"?_:q,alt:"Login Cover"})})}),e(u,{className:"d-flex align-items-center auth-bg px-2 p-lg-5",lg:"4",sm:"12",children:o(u,{className:"px-xl-2 mx-auto",sm:"8",md:"6",lg:"12",children:[e(Z,{tag:"h2",className:"fw-bold mb-1",children:"Welcome to Vuexy! \u{1F44B}"}),e(U,{className:"mb-2",children:"Please sign-in to your account and start the adventure"}),o(X,{color:"primary",children:[o("div",{className:"alert-body font-small-2",children:[e("p",{children:o("small",{className:"me-50",children:[e("span",{className:"fw-bold",children:"Admin:"})," admin@demo.com | admin"]})}),e("p",{children:o("small",{className:"me-50",children:[e("span",{className:"fw-bold",children:"Client:"})," client@demo.com | client"]})})]}),e(I,{id:"login-tip",className:"position-absolute",size:18,style:{top:"10px",right:"10px"}}),e(Y,{target:"login-tip",placement:"left",children:"This is just for ACL demo purpose."})]}),o(W,{className:"auth-login-form mt-2",onSubmit:w(async r=>{var x;if(console.log(r),n(!0),(x=Object.values(r))!=null&&x.every(t=>(t==null?void 0:t.length)>0))try{if(m){const t=await fetch("http://52.64.9.118:8000/api/trade/login/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r.loginEmail})}),a=await t.json();if(t.ok){F(!0),d(!1),k(!0),n(!1);return}else{p("loginEmail",{type:"manual",message:a.error||"Unexpected error during email sending."}),n(!1);return}}if(l){const t=await fetch("http://52.64.9.118:8000/api/trade/login/verify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r.loginEmail,otp:r.otp})}),a=await t.json();if(console.log(a),t.ok){const T={...a.userData,accessToken:a.accessToken,refreshToken:a.refreshToken,role:a.role,ability:a.ability};E(z(T)),console.log(a.role),S(M(a.role)),C(P=>e(oe,{t:P,role:a.role||"admin",name:a.fullName||a.username||"John Doe"}))}else{p("otp",{type:"manual",message:a.error||"Incorrect OTP. Please try again."});return}}}catch(t){console.error("Error during login:",t),n(!1)}finally{n(!1)}else for(const t in r)r[t].length===0&&p(t,{type:"manual"})}),children:[e("div",{className:"mb-1",children:m&&o(G,{children:[e(f,{className:"form-label",for:"login-email",children:"Email"}),e(N,{id:"loginEmail",name:"loginEmail",control:y,render:({field:r})=>e(h,{autoFocus:!0,type:"email",placeholder:"john@example.com",invalid:i.loginEmail&&!0,...r})}),i.loginEmail&&e(v,{children:i.loginEmail.message})]})}),e("div",{children:l&&o("div",{className:"mb-1",children:[e(f,{className:"form-label",for:"otp",children:"OTP"}),e(N,{id:"otp",name:"otp",control:y,render:({field:r})=>e(h,{type:"text",placeholder:"Enter OTP",invalid:i.otp&&!0,...r})}),i.otp&&e(v,{children:i.otp.message})]})}),o("div",{className:"form-check mb-1",children:[e(h,{type:"checkbox",id:"remember-me"}),e(f,{className:"form-check-label",for:"remember-me",children:"Remember Me"})]}),e(c,{type:"submit",color:"primary",block:!0,disabled:g,children:g?"Loading...":l?"Verify OTP and Sign in":"Sign in"})]}),o("p",{className:"text-center mt-2",children:[e("span",{className:"me-25",children:"New on our platform?"}),e(b,{to:"/register",children:e("span",{children:"Create an account"})})]}),e("div",{className:"divider my-2",children:e("div",{className:"divider-text",children:"or"})}),o("div",{className:"auth-footer-btn d-flex justify-content-center",children:[e(c,{color:"facebook",children:e(K,{size:14})}),e(c,{color:"twitter",children:e(Q,{size:14})}),e(c,{color:"google",children:e(R,{size:14})}),e(c,{className:"me-0",color:"github",children:e($,{size:14})})]})]})})]})})};export{we as default};
