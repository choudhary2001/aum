import{p as i,s as K,T as F,l as W,o as L,aE as q,x as G,aF as H,aG as J,j as d,m as u,aH as Q,q as V,k as m,J as P,t as X}from"./index.dff4e684.js";import{P as Y}from"./Portal.330fdcf6.js";import{F as v}from"./Fade.f1e5f77c.js";function x(t){return x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},x(t)}function B(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);n&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,o)}return r}function h(t){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?B(Object(r),!0).forEach(function(o){y(t,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):B(Object(r)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(r,o))})}return t}function y(t,n,r){return n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function Z(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function E(t,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function $(t,n,r){return n&&E(t.prototype,n),r&&E(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function ee(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&C(t,n)}function C(t,n){return C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,e){return o.__proto__=e,o},C(t,n)}function te(t){var n=ne();return function(){var o=k(t),e;if(n){var s=k(this).constructor;e=Reflect.construct(o,arguments,s)}else e=o.apply(this,arguments);return oe(this,e)}}function oe(t,n){if(n&&(x(n)==="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return l(t)}function l(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ne(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function k(t){return k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},k(t)}function _(){}var N=i.exports.shape(v.propTypes),S={autoFocus:i.exports.bool,backdrop:i.exports.oneOfType([i.exports.bool,i.exports.oneOf(["static"])]),backdropClassName:i.exports.string,backdropTransition:N,centered:i.exports.bool,children:i.exports.node,contentClassName:i.exports.string,className:i.exports.string,container:K,cssModule:i.exports.object,external:i.exports.node,fade:i.exports.bool,fullscreen:i.exports.oneOfType([i.exports.bool,i.exports.oneOf(["sm","md","lg","xl"])]),innerRef:i.exports.oneOfType([i.exports.object,i.exports.string,i.exports.func]),isOpen:i.exports.bool,keyboard:i.exports.bool,labelledBy:i.exports.string,modalClassName:i.exports.string,modalTransition:N,onClosed:i.exports.func,onEnter:i.exports.func,onExit:i.exports.func,onOpened:i.exports.func,returnFocusAfterClose:i.exports.bool,role:i.exports.string,scrollable:i.exports.bool,size:i.exports.string,toggle:i.exports.func,trapFocus:i.exports.bool,unmountOnClose:i.exports.bool,wrapClassName:i.exports.string,zIndex:i.exports.oneOfType([i.exports.number,i.exports.string])},re=Object.keys(S),se={isOpen:!1,autoFocus:!0,centered:!1,scrollable:!1,role:"dialog",backdrop:!0,keyboard:!0,zIndex:1050,fade:!0,onOpened:_,onClosed:_,modalTransition:{timeout:F.Modal},backdropTransition:{mountOnEnter:!0,timeout:F.Fade},unmountOnClose:!0,returnFocusAfterClose:!0,container:"body",trapFocus:!1},O=function(t){ee(r,t);var n=te(r);function r(o){var e;return Z(this,r),e=n.call(this,o),e._element=null,e._originalBodyPadding=null,e.getFocusableChildren=e.getFocusableChildren.bind(l(e)),e.handleBackdropClick=e.handleBackdropClick.bind(l(e)),e.handleBackdropMouseDown=e.handleBackdropMouseDown.bind(l(e)),e.handleEscape=e.handleEscape.bind(l(e)),e.handleStaticBackdropAnimation=e.handleStaticBackdropAnimation.bind(l(e)),e.handleTab=e.handleTab.bind(l(e)),e.onOpened=e.onOpened.bind(l(e)),e.onClosed=e.onClosed.bind(l(e)),e.manageFocusAfterClose=e.manageFocusAfterClose.bind(l(e)),e.clearBackdropAnimationTimeout=e.clearBackdropAnimationTimeout.bind(l(e)),e.trapFocus=e.trapFocus.bind(l(e)),e.state={isOpen:!1,showStaticBackdropAnimation:!1},e}return $(r,[{key:"componentDidMount",value:function(){var e=this.props,s=e.isOpen,a=e.autoFocus,c=e.onEnter;s&&(this.init(),this.setState({isOpen:!0}),a&&this.setFocus()),c&&c(),document.addEventListener("focus",this.trapFocus,!0),this._isMounted=!0}},{key:"componentDidUpdate",value:function(e,s){if(this.props.isOpen&&!e.isOpen){this.init(),this.setState({isOpen:!0});return}this.props.autoFocus&&this.state.isOpen&&!s.isOpen&&this.setFocus(),this._element&&e.zIndex!==this.props.zIndex&&(this._element.style.zIndex=this.props.zIndex)}},{key:"componentWillUnmount",value:function(){this.clearBackdropAnimationTimeout(),this.props.onExit&&this.props.onExit(),this._element&&(this.destroy(),(this.props.isOpen||this.state.isOpen)&&this.close()),document.removeEventListener("focus",this.trapFocus,!0),this._isMounted=!1}},{key:"handleBackdropClick",value:function(e){if(e.target===this._mouseDownElement){e.stopPropagation();var s=this._dialog?this._dialog.parentNode:null;if(s&&e.target===s&&this.props.backdrop==="static"&&this.handleStaticBackdropAnimation(),!this.props.isOpen||this.props.backdrop!==!0)return;s&&e.target===s&&this.props.toggle&&this.props.toggle(e)}}},{key:"handleTab",value:function(e){if(e.which===9&&!(this.modalIndex<r.openCount-1)){var s=this.getFocusableChildren(),a=s.length;if(a!==0){for(var c=this.getFocusedChild(),f=0,p=0;p<a;p+=1)if(s[p]===c){f=p;break}e.shiftKey&&f===0?(e.preventDefault(),s[a-1].focus()):!e.shiftKey&&f===a-1&&(e.preventDefault(),s[0].focus())}}}},{key:"handleBackdropMouseDown",value:function(e){this._mouseDownElement=e.target}},{key:"handleEscape",value:function(e){this.props.isOpen&&e.keyCode===L.esc&&this.props.toggle&&(this.props.keyboard?(e.preventDefault(),e.stopPropagation(),this.props.toggle(e)):this.props.backdrop==="static"&&(e.preventDefault(),e.stopPropagation(),this.handleStaticBackdropAnimation()))}},{key:"handleStaticBackdropAnimation",value:function(){var e=this;this.clearBackdropAnimationTimeout(),this.setState({showStaticBackdropAnimation:!0}),this._backdropAnimationTimeout=setTimeout(function(){e.setState({showStaticBackdropAnimation:!1})},100)}},{key:"onOpened",value:function(e,s){this.props.onOpened(),(this.props.modalTransition.onEntered||_)(e,s)}},{key:"onClosed",value:function(e){var s=this.props.unmountOnClose;this.props.onClosed(),(this.props.modalTransition.onExited||_)(e),s&&this.destroy(),this.close(),this._isMounted&&this.setState({isOpen:!1})}},{key:"setFocus",value:function(){this._dialog&&this._dialog.parentNode&&typeof this._dialog.parentNode.focus=="function"&&this._dialog.parentNode.focus()}},{key:"getFocusableChildren",value:function(){return this._element.querySelectorAll(q.join(", "))}},{key:"getFocusedChild",value:function(){var e,s=this.getFocusableChildren();try{e=document.activeElement}catch{e=s[0]}return e}},{key:"trapFocus",value:function(e){if(!!this.props.trapFocus&&!!this._element&&!(this._dialog&&this._dialog.parentNode===e.target)&&!(this.modalIndex<r.openCount-1)){for(var s=this.getFocusableChildren(),a=0;a<s.length;a+=1)if(s[a]===e.target)return;s.length>0&&(e.preventDefault(),e.stopPropagation(),s[0].focus())}}},{key:"init",value:function(){try{this._triggeringElement=document.activeElement}catch{this._triggeringElement=null}this._element||(this._element=document.createElement("div"),this._element.setAttribute("tabindex","-1"),this._element.style.position="relative",this._element.style.zIndex=this.props.zIndex,this._mountContainer=G(this.props.container),this._mountContainer.appendChild(this._element)),this._originalBodyPadding=H(),r.openCount<1&&(r.originalBodyOverflow=window.getComputedStyle(document.body).overflow),J(),r.openCount===0&&(document.body.className=d(document.body.className,u("modal-open",this.props.cssModule)),document.body.style.overflow="hidden"),this.modalIndex=r.openCount,r.openCount+=1}},{key:"destroy",value:function(){this._element&&(this._mountContainer.removeChild(this._element),this._element=null),this.manageFocusAfterClose()}},{key:"manageFocusAfterClose",value:function(){if(this._triggeringElement){var e=this.props.returnFocusAfterClose;this._triggeringElement.focus&&e&&this._triggeringElement.focus(),this._triggeringElement=null}}},{key:"close",value:function(){if(r.openCount<=1){var e=u("modal-open",this.props.cssModule),s=new RegExp("(^| )".concat(e,"( |$)"));document.body.className=document.body.className.replace(s," ").trim(),document.body.style.overflow=r.originalBodyOverflow}this.manageFocusAfterClose(),r.openCount=Math.max(0,r.openCount-1),Q(this._originalBodyPadding)}},{key:"clearBackdropAnimationTimeout",value:function(){this._backdropAnimationTimeout&&(clearTimeout(this._backdropAnimationTimeout),this._backdropAnimationTimeout=void 0)}},{key:"renderModalDialog",value:function(){var e,s=this,a=V(this.props,re),c="modal-dialog";return m("div",{...a,className:u(d(c,this.props.className,(e={},y(e,"modal-".concat(this.props.size),this.props.size),y(e,"".concat(c,"-centered"),this.props.centered),y(e,"".concat(c,"-scrollable"),this.props.scrollable),y(e,"modal-fullscreen",this.props.fullscreen===!0),y(e,"modal-fullscreen-".concat(this.props.fullscreen,"-down"),typeof this.props.fullscreen=="string"),e)),this.props.cssModule),role:"document",ref:function(p){s._dialog=p},children:m("div",{className:u(d("modal-content",this.props.contentClassName),this.props.cssModule),children:this.props.children})})}},{key:"render",value:function(){var e=this.props.unmountOnClose;if(!!this._element&&(this.state.isOpen||!e)){var s=!!this._element&&!this.state.isOpen&&!e;this._element.style.display=s?"none":"block";var a=this.props,c=a.wrapClassName,f=a.modalClassName,p=a.backdropClassName,b=a.cssModule,w=a.isOpen,T=a.backdrop,A=a.role,j=a.labelledBy,M=a.external,D=a.innerRef,I={onClick:this.handleBackdropClick,onMouseDown:this.handleBackdropMouseDown,onKeyUp:this.handleEscape,onKeyDown:this.handleTab,style:{display:"block"},"aria-labelledby":j,"aria-modal":!0,role:A,tabIndex:"-1"},g=this.props.fade,R=h(h(h({},v.defaultProps),this.props.modalTransition),{},{baseClass:g?this.props.modalTransition.baseClass:"",timeout:g?this.props.modalTransition.timeout:0}),z=h(h(h({},v.defaultProps),this.props.backdropTransition),{},{baseClass:g?this.props.backdropTransition.baseClass:"",timeout:g?this.props.backdropTransition.timeout:0}),U=T&&(g?m(v,{...z,in:w&&!!T,cssModule:b,className:u(d("modal-backdrop",p),b)}):m("div",{className:u(d("modal-backdrop","show",p),b)}));return m(Y,{node:this._element,children:P("div",{className:u(c),children:[P(v,{...I,...R,in:w,onEntered:this.onOpened,onExited:this.onClosed,cssModule:b,className:u(d("modal",f,this.state.showStaticBackdropAnimation&&"modal-static"),b),innerRef:D,children:[M,this.renderModalDialog()]}),U]})})}return null}}]),r}(W.Component);O.propTypes=S;O.defaultProps=se;O.openCount=0;O.originalBodyOverflow=null;const he=O;var ie=["className","cssModule","tag"];function ae(t,n){if(t==null)return{};var r=le(t,n),o,e;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(e=0;e<s.length;e++)o=s[e],!(n.indexOf(o)>=0)&&(!Object.prototype.propertyIsEnumerable.call(t,o)||(r[o]=t[o]))}return r}function le(t,n){if(t==null)return{};var r={},o=Object.keys(t),e,s;for(s=0;s<o.length;s++)e=o[s],!(n.indexOf(e)>=0)&&(r[e]=t[e]);return r}var ce={className:i.exports.string,cssModule:i.exports.object,tag:X};function pe(t){var n=t.className,r=t.cssModule,o=t.tag,e=o===void 0?"div":o,s=ae(t,ie),a=u(d(n,"modal-body"),r);return m(e,{...s,className:a})}pe.propTypes=ce;export{he as M,pe as a};
