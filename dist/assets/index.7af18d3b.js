import{J as t,k as e,P as f,j as R,B,r as g,U,ai as he,aj as ge,ak as fe,al as be,M as ke,E as Ne,am as ve,an as G,ao as V,ap as _,aq as Te,ar as Ce,as as Se}from"./index.dff4e684.js";import{f as xe,I as q,U as we,h as ye,i as De,j as P,d as Y,n as Me,A as W,M as Fe,o as Ae,s as $,k as D,X as Ie,a as Be}from"./App.37a2596a.js";import{R as Pe}from"./index.861bd21b.js";import{I as ze,a as Oe}from"./InputGroupText.9c960290.js";import{S as Re}from"./search.2277d3bd.js";import{M as J}from"./more-vertical.b394bd54.js";import{L as Q}from"./ListGroup.0455201d.js";import{L as x}from"./ListGroupItem.29fd27f5.js";import{S as K}from"./star.eb42d6c9.js";import{T as ee}from"./trash.ae88d3ea.js";import{P as Ee}from"./plus.6e4346f7.js";import{F as Le}from"./index.6984882e.js";import{r as je}from"./editor.ac9f656e.js";import{S as Z,c as Ue}from"./react-select.esm.82b43af0.js";import{u as Ge,C as We}from"./index.esm.650ebc72.js";import{D as M}from"./Draft.8c14d27f.js";import{M as qe,a as He}from"./ModalBody.fe13b04c.js";import{F as Ve}from"./Form.f1a34b24.js";import{F as _e}from"./FormFeedback.262b0142.js";import{L as z}from"./Label.138433f0.js";/* empty css                  */import"./emotion-memoize.esm.06f0e458.js";import"./Portal.330fdcf6.js";import"./Fade.f1e5f77c.js";const $e="/assets/avatar-blank.a991450c.png",Je=p=>{const{query:v,tasks:n,params:s,setSort:u,dispatch:h,getTasks:r,setQuery:N,updateTask:d,selectTask:i,reOrderTasks:o,handleTaskSidebar:m,handleMainSidebar:T}=p,w=a=>{h(i(a)),m()},C=a=>a.includes("high")?"light-primary":a.includes("medium")?"light-warning":a.includes("low")?"light-success":a.includes("update")?"light-danger":a.includes("team")?"light-info":"light-primary",F=a=>{const c={team:"light-primary",low:"light-success",medium:"light-warning",high:"light-danger",update:"light-info"};return a.map(b=>e(Me,{className:"text-capitalize",color:c[b],pill:!0,children:b},b))},A=a=>{const c=a.assignee;return c.avatar===void 0||c.avatar===null?e(W,{img:$e,imgHeight:"32",imgWidth:"32"}):c.avatar!==""?e(W,{img:c.avatar,imgHeight:"32",imgWidth:"32"}):e(W,{color:C(a.tags),content:c.fullName,initials:!0})},O=()=>e(Y,{className:"list-group todo-task-list-wrapper",options:{wheelPropagation:!1},containerRef:a=>{a&&(a._getBoundingClientRect=a.getBoundingClientRect,a.getBoundingClientRect=()=>{const c=a._getBoundingClientRect();return{...c,height:Math.floor(c.height)}})},children:n.length?e(Pe,{tag:"ul",list:n,handle:".drag-icon",className:"todo-task-list media-list",setList:a=>h(o(a)),children:n.map((a,c)=>e("li",{onClick:()=>w(a),className:R("todo-item",{completed:a.isCompleted}),children:t("div",{className:"todo-title-wrapper",children:[t("div",{className:"todo-title-area",children:[e(J,{className:"drag-icon"}),e("div",{className:"form-check",children:e(q,{type:"checkbox",id:a.title,checked:a.isCompleted,onClick:b=>b.stopPropagation(),onChange:b=>{b.stopPropagation(),h(d({...a,isCompleted:b.target.checked}))}})}),e("span",{className:"todo-title",children:a.title})]}),t("div",{className:"todo-item-action mt-lg-0 mt-50",children:[a.tags&&a.tags.length?e("div",{className:"badge-wrapper me-1",children:F(a.tags)}):null,a.dueDate?t("small",{className:"text-nowrap text-muted me-1",children:[new Date(a.dueDate).toLocaleString("default",{month:"short"})," ",new Date(a.dueDate).getDate().toString().padStart(2,"0")]}):null,a.assignee?A(a):null]})]})},`${a.id}-${c}`))}):e("div",{className:"no-results show",children:e("h5",{children:"No Items Found"})})}),I=a=>{N(a.target.value),h(r(s))},y=(a,c)=>{a.preventDefault(),u(c),h(r({...s}))};return t("div",{className:"todo-app-list",children:[t("div",{className:"app-fixed-search d-flex align-items-center",children:[e("div",{className:"sidebar-toggle cursor-pointer d-block d-lg-none ms-1",onClick:T,children:e(xe,{size:21})}),e("div",{className:"d-flex align-content-center justify-content-between w-100",children:t(ze,{className:"input-group-merge",children:[e(Oe,{children:e(Re,{className:"text-muted",size:14})}),e(q,{placeholder:"Search task",value:v,onChange:I})]})}),t(we,{children:[e(ye,{className:"hide-arrow me-1",tag:"a",href:"/",onClick:a=>a.preventDefault(),children:e(J,{className:"text-body",size:16})}),t(De,{end:!0,children:[e(P,{tag:f,to:"/",onClick:a=>y(a,"title-asc"),children:"Sort A-Z"}),e(P,{tag:f,to:"/",onClick:a=>y(a,"title-desc"),children:"Sort Z-A"}),e(P,{tag:f,to:"/",onClick:a=>y(a,"assignee"),children:"Sort Assignee"}),e(P,{tag:f,to:"/",onClick:a=>y(a,"due-date"),children:"Sort Due Date"}),e(P,{tag:f,to:"/",onClick:a=>y(a,""),children:"Reset Sort"})]})]})]}),O()]})},Qe=p=>{const{handleTaskSidebar:v,setMainSidebar:n,mainSidebar:s,dispatch:u,getTasks:h,params:r}=p,N=m=>{u(h({...r,filter:m}))},d=m=>{u(h({...r,tag:m}))},i=m=>!!(r.filter&&r.filter===m||r.tag&&r.tag===m),o=()=>{v(),n()};return e("div",{className:R("sidebar-left",{show:s===!0}),children:e("div",{className:"sidebar",children:e("div",{className:"sidebar-content todo-sidebar",children:t("div",{className:"todo-app-menu",children:[e("div",{className:"add-task",children:e(B,{color:"primary",onClick:o,block:!0,children:"Add Task"})}),t(Y,{className:"sidebar-menu-list",options:{wheelPropagation:!1},children:[t(Q,{tag:"div",className:"list-group-filters",children:[t(x,{action:!0,tag:f,to:"/apps/todo/",active:r.filter===""&&r.tag==="",onClick:()=>N(""),children:[e(Fe,{className:"me-75",size:18}),e("span",{className:"align-middle",children:"My Tasks"})]}),t(x,{tag:f,to:"/apps/todo/important",active:i("important"),onClick:()=>N("important"),action:!0,children:[e(K,{className:"me-75",size:18}),e("span",{className:"align-middle",children:"Important"})]}),t(x,{tag:f,to:"/apps/todo/completed",active:i("completed"),onClick:()=>N("completed"),action:!0,children:[e(Ae,{className:"me-75",size:18}),e("span",{className:"align-middle",children:"Completed"})]}),t(x,{tag:f,to:"/apps/todo/deleted",active:i("deleted"),onClick:()=>N("deleted"),action:!0,children:[e(ee,{className:"me-75",size:18}),e("span",{className:"align-middle",children:"Deleted"})]})]}),t("div",{className:"mt-3 px-2 d-flex justify-content-between",children:[e("h6",{className:"section-label mb-1",children:"Tags"}),e(Ee,{className:"cursor-pointer",size:14})]}),t(Q,{className:"list-group-labels",children:[t(x,{active:i("team"),className:"d-flex align-items-center",tag:f,to:"/apps/todo/tag/team",onClick:()=>d("team"),action:!0,children:[e("span",{className:"bullet bullet-sm bullet-primary me-1"}),e("span",{className:"align-middle",children:"Team"})]}),t(x,{active:i("low"),className:"d-flex align-items-center",tag:f,to:"/apps/todo/tag/low",onClick:()=>d("low"),action:!0,children:[e("span",{className:"bullet bullet-sm bullet-success me-1"}),e("span",{className:"align-middle",children:"Low"})]}),t(x,{active:i("medium"),className:"d-flex align-items-center",tag:f,to:"/apps/todo/tag/medium",onClick:()=>d("medium"),action:!0,children:[e("span",{className:"bullet bullet-sm bullet-warning me-1"}),e("span",{className:"align-middle",children:"Medium"})]}),t(x,{active:i("high"),className:"d-flex align-items-center",tag:f,to:"/apps/todo/tag/high",onClick:()=>d("high"),action:!0,children:[e("span",{className:"bullet bullet-sm bullet-danger me-1"}),e("span",{className:"align-middle",children:"High"})]}),t(x,{active:i("update"),className:"d-flex align-items-center",tag:f,to:"/apps/todo/tag/update",onClick:()=>d("update"),action:!0,children:[e("span",{className:"bullet bullet-sm bullet-info me-1"}),e("span",{className:"align-middle",children:"Update"})]})]})]})]})})})})},X=p=>p.charAt(0).toUpperCase()+p.slice(1),Ze=p=>{const{children:v,store:n,handleTaskSidebar:s,setDeleted:u,deleted:h,important:r,setImportant:N,deleteTask:d,dispatch:i}=p,o=()=>{u(!h),i(d(n.selectedTask.id)),s()};return t("div",{className:"modal-header d-flex align-items-center justify-content-between mb-1",children:[e("h5",{className:"modal-title",children:v}),t("div",{className:"todo-item-action d-flex align-items-center",children:[n&&!D(n.selectedTask)?e(ee,{className:"cursor-pointer mt-25",size:16,onClick:()=>o()}):null,e("span",{className:"todo-item-favorite cursor-pointer mx-75",children:e(K,{size:16,onClick:()=>N(!r),className:R({"text-warning":r===!0})})}),e(Ie,{className:"fw-normal mt-25",size:16,onClick:s})]})]})},Xe=p=>{const{open:v,handleTaskSidebar:n,store:s,dispatch:u,updateTask:h,selectTask:r,addTask:N,deleteTask:d}=p,[i,o]=g.exports.useState({value:"pheobe",label:"Pheobe Buffay",img:U}),[m,T]=g.exports.useState([]),[w,C]=g.exports.useState(M.EditorState.createEmpty()),[F,A]=g.exports.useState(!1),[O,I]=g.exports.useState(!1),[y,a]=g.exports.useState(!1),[c,b]=g.exports.useState(new Date),{control:ae,setError:te,setValue:E,clearErrors:se,handleSubmit:le,formState:{errors:L}}=Ge({defaultValues:{title:""}}),ie=[{value:"pheobe",label:"Pheobe Buffay",img:U},{value:"chandler",label:"Chandler Bing",img:he},{value:"ross",label:"Ross Geller",img:ge},{value:"monica",label:"Monica Geller",img:fe},{value:"joey",label:"Joey Tribbiani",img:be},{value:"Rachel",label:"Rachel Green",img:ke}],ne=[{value:"team",label:"Team"},{value:"low",label:"Low"},{value:"medium",label:"Medium"},{value:"high",label:"High"},{value:"update",label:"Update"}],re=({data:l,...k})=>e(Ue.Option,{...k,children:t("div",{className:"d-flex align-items-center",children:[e("img",{className:"d-block rounded-circle me-50",src:l.img,height:"26",width:"26",alt:l.label}),e("p",{className:"mb-0",children:l.label})]})}),oe=()=>s&&!D(s.selectedTask)?e(B,{outline:!0,size:"sm",onClick:()=>A(!F),color:F===!0?"success":"secondary",children:F===!0?"Completed":"Mark Complete"}):"Add Task",ce=()=>{const{selectedTask:l}=s;if(!D(l)){if(E("title",l.title),A(l.isCompleted),I(l.isImportant),o([{value:l.assignee.fullName,label:l.assignee.fullName,img:l.assignee.avatar}]),b(l.dueDate),typeof l.description=="string")C(M.EditorState.createWithContent(M.ContentState.createFromText(l.description)));else{const k=l.description._immutable.currentContent.blockMap,S=Object.keys(k).map(j=>j);C(M.EditorState.createWithContent(M.ContentState.createFromText(k[S].text)))}if(l.tags.length){const k=[];l.tags.map(S=>{k.push({value:S,label:X(S)})}),T(k)}}},de=()=>{T([]),C(""),E("title",""),o({value:"pheobe",label:"Pheobe Buffay",img:U}),A(!1),I(!1),b(new Date),u(r({})),se()},me=()=>{const l=M.EditorState.createWithContent(M.ContentState.createFromText(s.selectedTask.description));if(E("title",s.selectedTask.title),C(l),A(s.selectedTask.isCompleted),I(s.selectedTask.isImportant),a(s.selectedTask.isDeleted),b(s.selectedTask.dueDate),s.selectedTask.assignee.fullName!==i.label&&o({value:s.selectedTask.assignee.fullName,label:s.selectedTask.assignee.fullName,img:s.selectedTask.assignee.avatar}),s.selectedTask.tags.length){const k=[];s.selectedTask.tags.map(S=>{k.push({value:S,label:X(S)})}),T(k)}},pe=()=>s&&!D(s.selectedTask)?t(g.exports.Fragment,{children:[e(B,{color:"primary",className:"update-btn update-todo-item me-1",children:"Update"}),e(B,{color:"secondary",onClick:me,outline:!0,children:"Reset"})]}):t(g.exports.Fragment,{children:[e(B,{color:"primary",className:"add-todo-item me-1",children:"Add"}),e(B,{color:"secondary",onClick:n,outline:!0,children:"Cancel"})]});return e(qe,{isOpen:v,toggle:n,className:"sidebar-lg",contentClassName:"p-0",onOpened:ce,onClosed:de,modalClassName:"modal-slide-in sidebar-todo-modal",children:t(Ve,{id:"form-modal-todo",className:"todo-modal",onSubmit:le(l=>{const k=[],S=!D(s.selectedTask)&&i.label===s.selectedTask.assignee.fullName;m.length&&m.map(ue=>k.push(ue.value));const j={fullName:i.label,avatar:i.img},H={dueDate:c,title:l.title,tags:k,description:w,isCompleted:F,isDeleted:y,isImportant:O,assignee:S||i.label===void 0?s.selectedTask.assignee:j};l.title.length?D(L)&&(D(s.selectedTask)||!D(s.selectedTask)&&!s.selectedTask.title.length?u(N(H)):u(h({...H,id:s.selectedTask.id})),n()):te("title",{type:"manual"})}),children:[e(Ze,{store:s,deleted:y,dispatch:u,important:O,deleteTask:d,setDeleted:a,setImportant:I,handleTaskSidebar:n,children:oe()}),t(He,{className:"flex-grow-1 pb-sm-0 pb-3",children:[t("div",{className:"mb-1",children:[t(z,{className:"form-label",for:"task-title",children:["Title ",e("span",{className:"text-danger",children:"*"})]}),e(We,{name:"title",control:ae,render:({field:l})=>e(q,{id:"task-title",placeholder:"Title",className:"new-todo-item-title",invalid:L.title&&!0,...l})}),L.title&&e(_e,{children:"Please enter a valid task title"})]}),t("div",{className:"mb-1",children:[e(z,{className:"form-label",for:"task-assignee",children:"Assignee"}),e(Z,{id:"task-assignee",className:"react-select",classNamePrefix:"select",isClearable:!1,options:ie,theme:$,value:i,onChange:l=>o(l),components:{Option:re}})]}),t("div",{className:"mb-1",children:[e(z,{className:"form-label",for:"due-date",children:"Due Date"}),e(Le,{id:"due-date",name:"due-date",className:"form-control",onChange:l=>b(l[0]),value:c,options:{dateFormat:"Y-m-d"}})]}),t("div",{className:"mb-1",children:[e(z,{className:"form-label",for:"task-tags",children:"Tags"}),e(Z,{isMulti:!0,id:"task-tags",className:"react-select",classNamePrefix:"select",isClearable:!1,options:ne,theme:$,value:m,onChange:l=>{T(l!==null?[...l]:[])}})]}),t("div",{className:"mb-1",children:[e(z,{for:"task-desc",className:"form-label",children:"Description"}),e(je.exports.Editor,{editorState:w,wrapperClassName:"toolbar-bottom",toolbar:{options:["inline","textAlign"],inline:{inDropdown:!1,options:["bold","italic","underline"]}},onEditorStateChange:l=>C(l)})]}),e("div",{children:pe()})]})]})})};const Sa=()=>{const[p,v]=g.exports.useState(""),[n,s]=g.exports.useState(""),[u,h]=g.exports.useState(!1),[r,N]=g.exports.useState(!1),d=Be(),i=Ne(C=>C.todo),o=ve(),m={filter:o.filter||"",q:n||"",sortBy:p||"",tag:o.tag||""},T=()=>h(!u),w=()=>N(!r);return g.exports.useEffect(()=>{d(G({filter:o.filter||"",q:n||"",sortBy:p||"",tag:o.tag||""}))},[i.tasks.length,o.filter,o.tag,n,p]),t(g.exports.Fragment,{children:[e(Qe,{store:i,params:m,getTasks:G,dispatch:d,mainSidebar:u,urlFilter:o.filter,setMainSidebar:h,handleTaskSidebar:w}),e("div",{className:"content-right",children:e("div",{className:"content-wrapper",children:t("div",{className:"content-body",children:[e("div",{className:R("body-content-overlay",{show:u===!0}),onClick:T}),i?e(Je,{store:i,tasks:i.tasks,sort:p,query:n,params:m,setSort:v,setQuery:s,dispatch:d,getTasks:G,paramsURL:o,updateTask:V,selectTask:_,reOrderTasks:Te,handleMainSidebar:T,handleTaskSidebar:w}):null,e(Xe,{store:i,params:m,addTask:Ce,dispatch:d,open:r,updateTask:V,selectTask:_,deleteTask:Se,handleTaskSidebar:w})]})})})]})};export{Sa as default};
