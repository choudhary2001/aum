import{r as h,k as e,J as l,B as S,U as le,ai as j,aj as F,ak as U,al as G,M as te,aR as q,aS as re,j as ne,aT as oe,aU as ie,aV as de,aW as ce,aX as me,E as he,aY as ue,aZ as pe,a_ as ge}from"./index.dff4e684.js";import{u as M,C as P}from"./index.esm.650ebc72.js";import{F as W}from"./FormText.994b2fc1.js";import{a as R,X as be,d as fe,I,s as K,n as Y,k as ke,e as ve,U as Te,h as Ne,i as Ce,j as E}from"./App.37a2596a.js";import{M as Se,a as ye}from"./ModalBody.fe13b04c.js";import{F as xe}from"./Form.f1a34b24.js";import{F as Ae}from"./FormFeedback.262b0142.js";import{L as B}from"./Label.138433f0.js";import{F as we}from"./index.6984882e.js";import{u as Be}from"./file-uploader.f263979f.js";import{S as J,c as V}from"./react-select.esm.82b43af0.js";/* empty css                  */import{D as Ie}from"./download-cloud.bfc41e4b.js";import{R as De}from"./index.861bd21b.js";import{C as Fe}from"./Card.514988a9.js";import{C as Re}from"./CardBody.8c73518d.js";import{A as Oe}from"./index.4170b797.js";import{P as ze}from"./paperclip.15a21c78.js";import{M as Le}from"./more-vertical.b394bd54.js";import{P as Z}from"./plus.6e4346f7.js";import"./Portal.330fdcf6.js";import"./Fade.f1e5f77c.js";import"./tslib.17479ed9.js";import"./emotion-memoize.esm.06f0e458.js";import"./UncontrolledTooltip.57b433b3.js";import"./TooltipPopoverWrapper.2dcdb0e6.js";const Me=[{value:"Pheobe Buffay",label:"Pheobe Buffay",img:le},{value:"Chandler Bing",label:"Chandler Bing",img:j},{value:"Ross Geller",label:"Ross Geller",img:F},{value:"Monica Geller",label:"Monica Geller",img:U},{value:"Joey Tribbiani",label:"Joey Tribbiani",img:G},{value:"Rachel Green",label:"Rachel Green",img:te},{value:"Jerry Seinfeld",label:"Jerry Seinfeld",img:F},{value:"Jerry Seinfeld",label:"Jerry Seinfeld",img:F},{value:"Astro Kramer",label:"Astro Kramer",img:j},{value:"George Costanza",label:"George Costanza",img:G},{value:"Charlie Kelly",label:"Charlie Kelly",img:U},{value:"Dennis Reynolds",label:"Dennis Reynolds",img:F}],Pe=[{value:"UX",label:"UX"},{value:"App",label:"App"},{value:"Forms",label:"Forms"},{value:"Images",label:"Images"},{value:"Code Review",label:"Code Review"},{value:"Charts & Maps",label:"Charts & Maps"}],$e=v=>{const{sidebarOpen:a,labelColors:T,selectedTask:r,handleTaskSidebarToggle:u}=v,[m,p]=h.exports.useState(""),[i,c]=h.exports.useState([]),[g,o]=h.exports.useState([]),[f,b]=h.exports.useState(new Date),[N,k]=h.exports.useState(null),y=R(),{getRootProps:d,getInputProps:C}=Be({multiple:!1,onDrop:s=>{c([...s.map(n=>Object.assign(n))])}}),{control:A,setError:O,setValue:w,clearErrors:z,handleSubmit:L,formState:{errors:t}}=M({defaultValues:{title:""}}),x=({data:s,...n})=>e(V.Option,{...n,children:e(Y,{color:`light-${T[s.label]}`,children:s.label})}),_=({data:s,...n})=>e(V.Option,{...n,children:l("div",{className:"d-flex align-items-center",children:[e("img",{className:"d-block rounded-circle me-50",src:s.img,height:"26",width:"26",alt:s.label}),e("p",{className:"mb-0",children:s.label})]})}),H=()=>{if(!ke(r)){if(w("title",r.title),b(r.dueDate),p(r.description),r.coverImage&&c([r.coverImage]),r.assignedTo.length){const s=[];r.assignedTo.map(n=>{s.push({value:n.title,label:n.title,img:n.img})}),k(s)}if(r.labels.length){const s=[];r.labels.map(n=>{s.push({value:n,label:n})}),o(s)}}},Q=()=>{p(""),c([]),o([]),w("title",""),b(new Date),z(),y(q({})),k(null)},ee=s=>{if(s.title.length){const n=[],$=[];s.assignedTo&&N.length&&N.map(D=>{$.push({title:D.label,img:D.img})}),g.length&&g.map(D=>{n.push(D.label)}),y(re({...r,...s,dueDate:f,labels:n,description:m,assignedTo:$,...i.length&&typeof i[0]!="string"?{coverImage:URL.createObjectURL(i[0])}:{}})),u()}else O("title")},ae=()=>{if(i.length&&typeof i[0]!="string")return i.map(s=>e("img",{alt:s.name,className:"single-file-image img-fluid",src:URL.createObjectURL(s)},s.name));if(typeof i[0]=="string")return e("img",{alt:"task-img",className:"single-file-image img-fluid",src:i[0]})},se=()=>{if(p(""),w("title",store.selectedTask.title),b(store.selectedTask.dueDate),r.assignedTo.length){const s=[];r.assignedTo.map(n=>{s.push({value:n.title,label:n.title,img:n.img})}),k(s)}if(r.labels.length){const s=[];r.labels.map(n=>{s.push({value:n,label:n})}),o(s)}r.coverImage?c([r.coverImage]):c([])};return e(Se,{isOpen:a,className:"sidebar-lg",contentClassName:"p-0",onOpened:H,onClosed:Q,toggle:u,modalClassName:"modal-slide-in sidebar-kanban-modal",children:l(xe,{id:"form-modal-kanban",className:"kanban-task-modal",onSubmit:L(ee),children:[l("div",{className:"modal-header d-flex align-items-center justify-content-between mb-1",children:[e("h5",{className:"modal-title",children:"Update Task"}),e(be,{className:"fw-normal mt-25",size:16,onClick:u})]}),e(fe,{options:{wheelPropagation:!1},children:l(ye,{className:"flex-grow-1 pb-sm-0 pb-3",children:[l("div",{className:"mb-1",children:[l(B,{className:"form-label",for:"task-title",children:["Title ",e("span",{className:"text-danger",children:"*"})]}),e(P,{name:"title",control:A,render:({field:s})=>e(I,{id:"task-title",placeholder:"Title",className:"new-todo-item-title",invalid:t.title&&!0,...s})}),t.title&&e(Ae,{children:"Please enter a valid task title"})]}),l("div",{className:"mb-1",children:[e(B,{className:"form-label",for:"due-date",children:"Due Date"}),e(we,{id:"due-date",name:"due-date",value:f,className:"form-control",options:{dateFormat:"Y-m-d"},onChange:s=>b(s[0])})]}),l("div",{className:"mb-1",children:[e(B,{className:"form-label",for:"task-labels",children:"Labels"}),e(J,{isMulti:!0,value:g,id:"task-labels",isClearable:!1,options:Pe,className:"react-select",classNamePrefix:"select",theme:K,components:{Option:x},onChange:s=>{o(s!==null?[...s]:[])}})]}),l("div",{className:"mb-1",children:[e(B,{className:"form-label",for:"task-assignee",children:"Assignee"}),e(J,{isMulti:!0,id:"task-assignee",value:N,isClearable:!1,className:"react-select",classNamePrefix:"select",options:Me,theme:K,onChange:s=>k(s),components:{Option:_}})]}),e("div",{className:"mb-1",children:l("div",{...d({className:"dropzone"}),children:[e("input",{...C()}),l("div",{className:"d-flex align-items-center justify-content-center flex-column text-center",children:[e(Ie,{size:64}),e("h5",{children:"Drop Files here or click to upload"})]}),i.length?ae():null]})}),l("div",{className:"mb-1",children:[e(B,{className:"form-label",for:"task-desc",children:"Description"}),e(I,{type:"textarea",value:m,name:"text",id:"task-desc",rows:"3",placeholder:"Description...",onChange:s=>p(s.target.value)})]}),l("div",{children:[e(S,{type:"submit",color:"primary",className:"me-1",children:"Update"}),e(S,{outline:!0,color:"secondary",onClick:se,children:"Reset"})]})]})})]})})},je=v=>{const{task:a,labelColors:T,handleTaskSidebarToggle:r}=v,u=R(),m=()=>{u(q(a)),r()},p=()=>a.labels.length?e("div",{className:"mb-1",children:a.labels.map((o,f)=>{const b=a.labels[a.labels.length-1]===o;return e(Y,{pill:!0,label:o,color:`light-${T[o]}`,className:ne({"me-75":!b}),children:o},f)})}):null,i=()=>a.attachments&&a.attachments.length||a.comments&&a.comments.length?l("div",{className:"d-flex align-items-center",children:[a.attachments&&a.attachments.length?l("div",{className:"d-flex align-items-center cursor-pointer me-75",children:[e(ze,{size:16,className:"me-25"}),e("span",{children:a.attachments.length})]}):null,a.comments&&a.comments.length?l("div",{className:"d-flex align-items-center cursor-pointer",children:[e(ve,{size:16,className:"me-50"}),e("span",{children:a.comments.length})]}):null]}):null,c=()=>a.comments&&!a.comments.length&&a.attachments&&!a.attachments.length?"justify-content-end":"justify-content-between",g=()=>a.attachments&&a.attachments.length||a.comments&&a.comments.length||a.assignedTo&&a.assignedTo.length?l("div",{className:`task-footer d-flex align-items-center mt-1 ${c()}`,children:[i(),a.assignedTo.length?e("div",{children:a.assignedTo.length?e(Oe,{data:a.assignedTo}):null}):null]}):null;return e(Fe,{onClick:m,className:"task","data-board-id":a.boardId,"data-task-id":a.id,children:l(Re,{"data-task-id":a.id,children:[p(),a.coverImage?e("img",{className:"img-fluid rounded task-img mb-1",alt:a.title,src:a.coverImage}):null,e("span",{className:"task-title",children:a.title}),g()]})})},Ue={taskTitle:""},Ge=v=>{const{board:a,index:T,store:r,labelColors:u,handleTaskSidebarToggle:m}=v,[p,i]=h.exports.useState(""),[c,g]=h.exports.useState(null),o=R(),{reset:f,control:b,handleSubmit:N,formState:{errors:k}}=M({defaultValues:Ue});h.exports.useEffect(()=>{i(a.title)},[a.title]);const y=()=>{f(),g(null)},d=()=>{f(),g(a.id)},C=()=>{o(oe(a.id))},A=()=>{o(ie(a.id))},O=t=>{o(me({title:t.taskTitle,boardId:a.id})),y()},w=()=>a.id===c?l("form",{onSubmit:N(O),children:[l("div",{className:"mb-1",children:[e(P,{name:"taskTitle",control:b,rules:{required:!0},render:({field:{value:t,onChange:x}})=>e(I,{autoFocus:!0,rows:"2",value:t,type:"textarea",id:"task-title",onChange:x,placeholder:"Add Content",invalid:k.taskTitle&&!0,"aria-describedby":"validation-add-task"})}),k.taskTitle&&e(W,{color:"danger",id:"validation-add-task",children:"Please enter a valid Task Title"})]}),l("div",{children:[e(S,{color:"primary",size:"sm",type:"submit",className:"me-75",children:"Add"}),e(S,{outline:!0,size:"sm",color:"secondary",onClick:y,children:"Cancel"})]})]}):null,z=t=>{t.from.classList[1]===t.to.classList[1]&&o(de({taskId:t.item.dataset.taskId,targetTaskId:t.originalEvent.target.dataset.taskId}))},L=t=>{o(ce({taskId:t.item.dataset.taskId,boardId:t.item.dataset.boardId,newBoardId:t.to.classList[1].replace("board-","")}))};return e(h.exports.Fragment,{children:l("div",{className:"board-wrapper",children:[l("div",{className:"d-flex align-items-center justify-content-between",children:[e("div",{className:"d-flex align-items-center board-header",children:e(I,{className:"board-title",value:p,onChange:t=>i(t.target.value)})}),l(Te,{className:"more-options-dropdown",children:[e(Ne,{className:"btn-icon",color:"transparent",size:"sm",children:e(Le,{size:20})}),l(Ce,{end:!0,children:[e(E,{href:"/",onClick:t=>{t.preventDefault(),C()},children:"Clear Tasks"}),e(E,{href:"/",onClick:t=>{t.preventDefault(),A()},children:"Delete Board"})]})]})]}),l("div",{children:[e(De,{list:r.tasks,group:"shared-group",setList:()=>null,onChange:z,onAdd:L,className:`tasks-wrapper board-${a.id}`,children:r.tasks.map((t,x)=>t.boardId===a.id?e(je,{task:t,index:x,labelColors:u,handleTaskSidebarToggle:m},`${t.boardId}-${x}`):e(h.exports.Fragment,{},`${t.boardId}-${x}`))}),c===null||c!==null&&c!==a.id?l(S,{size:"sm",color:"flat-secondary",onClick:d,children:[e(Z,{size:14,className:"me-25"}),e("span",{className:"align-middle",children:"Add New Task"})]}):w()]})]})},T)};const Ke={boardTitle:""},X={App:"info",UX:"success",Images:"warning",Forms:"success","Code Review":"danger","Charts & Maps":"primary"},ga=()=>{const[v,a]=h.exports.useState(!1),[T,r]=h.exports.useState(!1),u=R(),m=he(d=>d.kanban),{reset:p,control:i,handleSubmit:c,formState:{errors:g}}=M({defaultValues:Ke}),o=()=>{p(),r(!1)},f=()=>{p(),r(!0)},b=d=>{u(ge({title:d.boardTitle,id:d.boardTitle.toLowerCase().replace(/ /g,"-")})),o()},N=()=>a(!v),k=()=>m.boards.map((d,C)=>{const A=m.boards[m.boards.length-1].id===d.id;return e(Ge,{store:m,board:d,labelColors:X,isLastBoard:A,index:`${d.id}-${C}`,handleTaskSidebarToggle:N},`${d.id}-${C}`)}),y=()=>T?l("form",{onSubmit:c(b),children:[l("div",{className:"mb-50",children:[e(P,{name:"boardTitle",control:i,rules:{required:!0},render:({field:{value:d,onChange:C}})=>e(I,{autoFocus:!0,value:d,id:"board-title",onChange:C,placeholder:"Board Title",invalid:Boolean(g.boardTitle),"aria-describedby":"validation-add-board"})}),g.boardTitle&&e(W,{color:"danger",id:"validation-add-board",children:"Please enter a valid Board Title"})]}),l("div",{children:[e(S,{color:"primary",size:"sm",type:"submit",className:"me-75",children:"Add"}),e(S,{outline:!0,size:"sm",color:"secondary",onClick:o,children:"Cancel"})]})]}):null;return h.exports.useEffect(()=>{u(ue()),u(pe())},[u]),m.boards?l("div",{className:"app-kanban-wrapper",children:[k(),e("div",{className:"ms-1",style:{minWidth:150},children:T?y():l(S,{size:"sm",color:"light-secondary",onClick:f,children:[e(Z,{size:14,className:"me-25"}),e("span",{className:"align-middle",children:" Add Board"})]})}),e($e,{labelColors:X,sidebarOpen:v,selectedTask:m.selectedTask,handleTaskSidebarToggle:N})]}):null};export{ga as default};
